<!doctype html>
<html style="overflow:hidden">
<head>
  <meta charset="utf-8">
  <title>Demo 4 - LogicBlox Pivot Table</title>
  <style>
        #grid{
          position : absolute;
          left : 50px;
          top : 50px;
          right : 50px;
          bottom : 50px;
        }
  </style>
</head>
<body>
    <div id="grid"></div>

    <script type="text/javascript">
    var require = {
        paths: {
          pivot: "../lib/pivot"
        }
    };
    </script>
    <script src="require.js"></script>
    <script>
        require(["./humongous.mock", "pivot/pivot"], 
        function(HumongousDataProvider, Pivot){
            var div = document.getElementById("grid");
            
            var pivot = new Pivot(div, 90, 24);
            pivot.setOption("totals", false);
            
            var providerBig = new HumongousDataProvider();
            providerBig.load([
                { name: "person", length: 25000 }, //25 thousand
                { name: "product", length: 1000000 }, //1 million
                { name: "store", length: 5000 },
                { name: "month", length: 12 },
                { name: "year", length: 75 },
            ], 100, function(name, index){
                return name + " " + (index + 1);
            }, function (i, j){
                return j === 0 ? "Row " + (i + 1) : (j + 1);
            });
            providerBig.setQuery(
              ["store", "year", "month"], 
              ["person", "product"],
              {kind: "sum", entity: "value"},
              false,
              function(){ 
                  pivot.setDataProvider(providerBig);
              });
            
            window.addEventListener("resize", function(){
                pivot.resize();
            })
        });
    </script>
</body>
</html>