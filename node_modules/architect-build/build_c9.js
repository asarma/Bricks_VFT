var build = require("./build");
var pathConfig = require("./path_config");
var ROOT = pathConfig.root;

var compress = process.argv.indexOf("nc") == -1;
var verbose = process.argv.indexOf("v") != -1;
var debug = process.argv.indexOf("d") != -1;

var config = require(ROOT + "./configs/client-default")({
    workspaceDir : ROOT,
    workspaceId  : "devel",
    uid          : "1",
    pid          : process.pid,
    projectName  : "devel",
    tmux         : process.platform == "darwin"
        ? require("path").resolve(__dirname + "/../deps/tmux/darwin/tmux")
        : "tmux"
});
// config = ["plugins/c9.ui/ui"]
build(config, {
    pathConfig    : pathConfig,
    enableBrowser : true,
    includeConfig : true,
    compress      : compress,
    log           : verbose,
    debug         : debug,
    basepath      : "/home/ubuntu/newclient",
    filter        : [],    
    additonal     : ["../architect-build/build_support/mini_require"],
    outputFolder  : ROOT + "node_modules/build/c9",
    outputFile    : "c9.js",
    mapFile       : "c9.js.map"
    // mapRoot       : "http://example.com"
}, function(err, data){
    if (err) console.error(err.message);
});

build([
    "ace/lib/fixoldbrowsers",
    "plugins/c9.language/worker",
    "plugins/c9.language.generic/local_completer",
    "plugins/c9.language.generic/snippet_completer",
    "plugins/c9.language.generic/open_files_local_completer",
    "plugins/c9.language.generic/mode_completer",
    "plugins/c9.language.logiql/logiql_handler",
    "plugins/c9.language.logiql_commands/logiql_commands_handler"
], {
    enableBrowser : true,
    includeConfig : false,
    pathConfig    : pathConfig,
    noArchitect   : true,
    compress      : compress,
    //filter        : ["ace"],
    log           : verbose,
    additonal     : ["../ace/lib/ace/worker/worker"],
    basepath      : "/home/ubuntu/newclient",
    outputFolder  : ROOT + "node_modules/build/c9",
    outputFile    : "worker-c9.language.js",
    mapFile       : "worker-c9.language.js.map"
    // mapRoot       : "http://example.com"
}, function(err, data){
    if (err) console.error(err.message);
});
 